<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Digital - Sistema Educativo</title>

    <link rel="stylesheet" href="style.css">
    <!-- Los estilos fueron movidos a public/style.css -->
</head>
<body>
    <div class="container">


        <!-- Auth Screen -->
        <div id="authScreen" class="auth-container">
            <h2 id="authTitle">Iniciar Sesi칩n</h2>
            <div id="alertMessage"></div>
            
            <form id="authForm">
                <div class="form-group hidden" id="usernameGroup">
                    <label>Usuario</label>
                    <input type="text" id="username" placeholder="Tu nombre de usuario">
                </div>
                
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="email" placeholder="tu@email.com" required>
                </div>
                
                <div class="form-group">
                    <label>Contrase침a</label>
                    <input type="password" id="password" placeholder="Tu contrase침a" required>
                </div>
                
                <button type="submit" class="btn btn-primary" id="authButton">Iniciar Sesi칩n</button>
            </form>
            
            <div class="switch-auth">
                <span id="switchText">쯅o tienes cuenta? <a href="#" id="switchLink">Reg칤strate</a></span>
            </div>
        </div>



        <!-- Main App Screen -->
        <div id="appScreen" class="hidden">
            <div class="header">
                <h1>游닄 Biblioteca Digital</h1>
                <div class="user-info">
                    <span id="welcomeText"></span>
                    <span id="roleBadge" class="badge"></span>
                    <button class="btn btn-danger" onclick="logout()" style="width: auto; padding: 8px 20px;">Salir</button>
                </div>
            </div>

            <div class="main-content">
                <div class="tabs">
                    <button class="tab active" onclick="showTab('books')">Biblioteca</button>
                    <button class="tab" onclick="showTab('users')" id="usersTab" style="display: none;">Gesti칩n de Usuarios</button>
                    <button class="tab" onclick="showTab('addBook')" id="addBookTab" style="display: none;">Agregar Libro</button>
                </div>

                <!-- Books Tab -->
                <div id="booksContent" class="tab-content active">
                    <h2>Cat치logo de Libros</h2>
                    <div class="books-grid" id="booksGrid"></div>
                </div>

                <!-- Users Management Tab -->
                <div id="usersContent" class="tab-content">
                    <h2>Gesti칩n de Usuarios</h2>
                    <button class="btn btn-success" onclick="showCreateUserModal()" style="width: auto; margin-bottom: 20px;">Crear Nuevo Usuario</button>
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Fecha de Registro</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody"></tbody>
                    </table>
                </div>

                <!-- Add Book Tab -->
                <div id="addBookContent" class="tab-content">
                    <h2>Agregar Nuevo Libro</h2>
                    <form id="bookForm">
                        <div class="form-group">
                            <label>T칤tulo *</label>
                            <input type="text" id="bookTitle" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Autor *</label>
                            <input type="text" id="bookAuthor" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Descripci칩n</label>
                            <input type="text" id="bookDescription">
                        </div>
                        
                        <div class="form-group">
                            <label>A침o</label>
                            <input type="number" id="bookYear">
                        </div>
                        
                        <div class="form-group">
                            <label>G칠nero</label>
                            <input type="text" id="bookGenre" placeholder="Ficci칩n, Ciencia, Historia...">
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="bookExclusive">
                                Contenido Exclusivo VIP
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Agregar Libro</button>
                    </form>
                </div>
            </div>
        </div>


        <!-- Create User Modal -->
        <div id="createUserModal" class="modal">
            <div class="modal-content">
                <h2>Crear Nuevo Usuario</h2>
                <form id="createUserForm">
                    <div class="form-group">
                        <label>Usuario *</label>
                        <input type="text" id="newUsername" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="newEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Contrase침a *</label>
                        <input type="password" id="newPassword" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Rol *</label>
                        <select id="newRole" required>
                            <option value="free">Free</option>
                            <option value="vip">VIP</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    
                    
                    <button type="submit" class="btn btn-success">Crear Usuario</button>
                    <button type="button" class="btn btn-secondary" onclick="closeCreateUserModal()">Cancelar</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts de los m칩dulos -->
    <script src="js/config.js"></script>
    <script src="js/utils/api.js"></script>
    <script src="js/utils/ui.js"></script>
    <script src="js/modules/auth.js"></script>
    <script src="js/modules/books.js"></script>
    <script src="js/modules/users.js"></script>

    <script>
        // ==================== AUTH EVENT LISTENERS ====================
        // Los event listeners de auth se mantienen aqu칤 para conectar con las funciones de auth.js
        
        document.getElementById('authForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (window.isLoginMode) {
                await window.login();
            } else {
                await window.register();
            }
        });

        document.getElementById('switchLink').addEventListener('click', (e) => {
            e.preventDefault();
            window.toggleAuthMode();
        });

        // ==================== BOOKS EVENT LISTENERS ====================
        // Los event listeners de books se mantienen aqu칤 para conectar con las funciones de books.js
        
        document.getElementById('bookForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            await window.createBook();
        });

        // ==================== USERS EVENT LISTENERS ====================
        // Los event listeners de users se mantienen aqu칤 para conectar con las funciones de users.js
        
        document.getElementById('createUserForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            await window.createUser();
        });

        // ==================== INITIALIZATION ====================
        // Todas las funciones UI ahora est치n en ui.js
    </script>
</body>
</html>